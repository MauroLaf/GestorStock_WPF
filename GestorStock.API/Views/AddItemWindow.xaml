<Window x:Class="GestorStock.API.Views.AddItemWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Agregar ítem" Width="1120" Height="650"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- CABECERA -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                <TextBlock Text="Proveedor:" FontWeight="Bold"/>
                <ComboBox x:Name="cmbProveedor" DisplayMemberPath="Nombre"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="0,0,8,0">
                <TextBlock Text="Ubicación/Producto:" FontWeight="Bold"/>
                <ComboBox x:Name="cmbUbicacion" DisplayMemberPath="Nombre"/>
            </StackPanel>

            <StackPanel Grid.Column="2" Margin="0,0,8,0">
                <TextBlock Text="Familia:" FontWeight="Bold"/>
                <ComboBox x:Name="cmbFamilia" DisplayMemberPath="Nombre"/>
            </StackPanel>

            <StackPanel Grid.Column="3">
                <TextBlock Text="Tipo de Soporte:" FontWeight="Bold"/>
                <ComboBox x:Name="cmbTipoSoporte" DisplayMemberPath="Nombre"/>
            </StackPanel>
        </Grid>

        <!-- FORM LINEA -->
        <Grid Grid.Row="1" Margin="0,10,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                <TextBlock Text="Repuesto (Nombre):" FontWeight="Bold"/>
                <ComboBox x:Name="cmbRepuestoCatalogo" IsEditable="True" />
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="0,0,8,0">
                <TextBlock Text="Descripción:" FontWeight="Bold"/>
                <TextBox x:Name="txtDescripcion"/>
            </StackPanel>

            <StackPanel Grid.Column="2" Margin="0,0,8,0">
                <TextBlock Text="Cantidad:" FontWeight="Bold"/>
                <TextBox x:Name="txtCantidad" Width="80" Text="1"/>
            </StackPanel>

            <StackPanel Grid.Column="3" Margin="0,0,8,0">
                <TextBlock Text="Precio:" FontWeight="Bold"/>
                <TextBox x:Name="txtPrecio" Width="100" Text="0"/>
            </StackPanel>

            <StackPanel Grid.Column="4" Margin="0,0,8,0">
                <TextBlock Text="Tipo (Original/Usado):" FontWeight="Bold"/>
                <ComboBox x:Name="cmbTipoRepuesto">
                    <ComboBoxItem Content="Original" Tag="0"/>
                    <ComboBoxItem Content="Usado"    Tag="1"/>
                </ComboBox>
            </StackPanel>

            <!-- Antes había Spacing aquí: lo reemplazo con Margin por estilo -->
            <StackPanel Grid.Column="5" Orientation="Horizontal" VerticalAlignment="Bottom">
                <StackPanel.Resources>
                    <Style TargetType="Button">
                        <Setter Property="Margin" Value="8,0,0,0"/>
                    </Style>
                </StackPanel.Resources>
                <!-- Acciones de línea -->
                <UniformGrid Grid.Column="5" Rows="1" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,22,0,0">
                    <Button Content="+" Width="28" Height="28" Padding="0" Click="BtnAddLinea_Click" Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"/>
                    <Button Content="Editar" Height="28" Padding="6,0" Click="BtnEditLinea_Click" Style="{StaticResource ModernButtonStyle}" Margin="0,0,8,0"/>
                    <Button Content="-" Width="28" Height="28" Padding="0" Click="BtnRemoveLinea_Click" Style="{StaticResource ModernButtonStyle}"/>
                </UniformGrid>
            </StackPanel>
        </Grid>

        <!-- GRID DETALLE -->
        <DataGrid x:Name="dgDetalle" Grid.Row="2"
                  AutoGenerateColumns="False" CanUserAddRows="False"
                  IsReadOnly="True" HeadersVisibility="Column">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Nombre"    Binding="{Binding Nombre}" Width="200"/>
                <DataGridTextColumn Header="Descr"     Binding="{Binding Descripcion}" Width="220"/>
                <DataGridTextColumn Header="Cantidad"  Binding="{Binding Cantidad}" Width="80"/>
                <DataGridTextColumn Header="Precio"    Binding="{Binding Precio, StringFormat={}{0:0.00}}" Width="100"/>
                <DataGridTextColumn Header="Tipo"      Binding="{Binding TipoRepuesto}" Width="120"/>
                <DataGridTextColumn Header="Ubicación" Binding="{Binding UbicacionProducto.Nombre}" Width="220"/>
                <DataGridTextColumn Header="Soporte"   Binding="{Binding TipoSoporte.Nombre}" Width="160"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Botonera inferior -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <StackPanel.Resources>
                <Style TargetType="Button">
                    <Setter Property="Margin" Value="8,0,0,0"/>
                </Style>
            </StackPanel.Resources>
            <Button Content="Aceptar" Click="BtnAceptar_Click" Style="{StaticResource ModernButtonStyle}" Margin="0,0,0,0"/>
            <Button Content="Cancelar" Click="BtnCancelar_Click" Style="{StaticResource ModernButtonStyle}"/>
        </StackPanel>
    </Grid>
</Window>
