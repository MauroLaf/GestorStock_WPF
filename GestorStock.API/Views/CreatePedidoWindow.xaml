<Window x:Class="GestorStock.API.Views.CreatePedidoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pedido" Width="900" Height="600"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ===== CABECERA ===== -->
        <Grid Grid.Row="0" Margin="0,0,0,8">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <!-- Familia -->
            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                <TextBlock Text="Familia" Margin="0,0,0,2"/>
                <ComboBox x:Name="cmbFamilia"
                          DisplayMemberPath="Nombre"
                          SelectionChanged="cmbFamilia_SelectionChanged"/>
            </StackPanel>

            <!-- Ubicación -->
            <StackPanel Grid.Column="1" Margin="0,0,8,0">
                <TextBlock Text="Ubicación" Margin="0,0,0,2"/>
                <ComboBox x:Name="cmbUbicacion" DisplayMemberPath="Nombre"/>
            </StackPanel>

            <!-- Proveedor -->
            <StackPanel Grid.Column="2" Margin="0,0,8,0">
                <TextBlock Text="Proveedor" Margin="0,0,0,2"/>
                <ComboBox x:Name="cmbProveedor" DisplayMemberPath="Nombre"/>
            </StackPanel>

            <!-- Tipo de soporte -->
            <StackPanel Grid.Column="3">
                <TextBlock Text="Tipo de soporte" Margin="0,0,0,2"/>
                <ComboBox x:Name="cmbTipoSoporte" DisplayMemberPath="Nombre"/>
            </StackPanel>

            <!-- Descripción del pedido -->
            <StackPanel Grid.Row="1" Grid.ColumnSpan="4" Margin="0,8,0,0">
                <TextBlock Text="Descripción del pedido" Margin="0,0,0,2"/>
                <TextBox x:Name="txtDescripcionPedido"/>
            </StackPanel>
        </Grid>

        <!-- ===== DETALLE ===== -->
        <DataGrid x:Name="dgRepuestos" Grid.Row="1"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  SelectionMode="Single">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Nombre"    Binding="{Binding Nombre}" Width="*"/>
                <DataGridTextColumn Header="Ubicación" Binding="{Binding UbicacionProducto.Nombre}" Width="150"/>
                <DataGridTextColumn Header="Soporte"   Binding="{Binding TipoSoporte.Nombre}"       Width="150"/>
                <DataGridTextColumn Header="Cant."     Binding="{Binding Cantidad}"                  Width="80"/>
                <DataGridTextColumn Header="Precio"    Binding="{Binding Precio}"                    Width="100"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ===== INCIDENCIA + ACCIONES ===== -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,8,0,0">
            <CheckBox x:Name="chkIncidencia" Content="Incidencia" Margin="0,0,12,0"
                      Checked="chkIncidencia_Checked" Unchecked="chkIncidencia_Checked"/>

            <TextBlock VerticalAlignment="Center" Text="Fecha incidencia:" Margin="0,0,6,0"/>
            <DatePicker x:Name="dpFechaIncidencia" Margin="0,0,12,0" Width="140"/>

            <TextBlock VerticalAlignment="Center" Text="Desc. incidencia:" Margin="0,0,6,0"/>
            <TextBox x:Name="txtDescripcionIncidencia" Width="240" Margin="0,0,12,0"/>

            <TextBlock VerticalAlignment="Center" Text="Llegada:" Margin="0,0,6,0"/>
            <DatePicker x:Name="dpFechaLlegada" Width="140" Margin="0,0,12,0"/>

            <Button Content="Agregar línea" Margin="0,0,8,0" Click="BtnAgregarLinea_Click"/>
            <Button Content="Editar línea"  Margin="0,0,8,0" Click="BtnEditarLinea_Click"/>
            <Button Content="Quitar línea"  Margin="0,0,8,0" Click="BtnQuitarLinea_Click"/>
            <Button Content="Guardar"             Click="BtnGuardar_Click"/>
        </StackPanel>
    </Grid>
</Window>
